<!-- 内容头部 -->
<section class="content-header">
    <h1>
        产品管理
        <small>全部产品</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href=".../../../index.jsp"><i
                class="fa fa-dashboard"></i> 首页</a></li>
        <li><a
                href=".../../../product/findAll.do">产品管理</a></li>
        <li class="active">全部产品</li>
    </ol>
</section>
<!-- 内容头部 /-->
<!-- 正文区域 -->
<section class="content"> <!-- .box-body -->
    <div class="box box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">列表</h3>
        </div>
        <div class="box-body">
            <!-- 数据表格 -->
            <div class="table-box">
                <!--工具栏-->
                <div class="pull-left">
                    <div class="form-group form-inline">
                        <div class="btn-group">
                            <button type="button" id="productAdd" class="btn btn-default" title="新建">
                                <i class="fa fa-file-o"></i> 新建
                            </button>
                            <button type="button" class="btn btn-default" title="删除"
                                    onclick='confirm("你确认要删除吗？")'>
                                <i class="fa fa-trash-o"></i> 删除
                            </button>
                            <button type="button" class="btn btn-default" title="开启"
                                    onclick='confirm("你确认要开启吗？")'>
                                <i class="fa fa-check"></i> 开启
                            </button>
                            <button type="button" class="btn btn-default" title="屏蔽"
                                    onclick='confirm("你确认要屏蔽吗？")'>
                                <i class="fa fa-ban"></i> 屏蔽
                            </button>
                            <button type="button" class="btn btn-default" title="刷新"
                                    onclick="window.location.reload();">
                                <i class="fa fa-refresh"></i> 刷新
                            </button>
                        </div>
                    </div>
                </div>
                <div class="box-tools pull-right">
                    <div class="has-feedback">
                        <input type="text" class="form-control input-sm"
                               placeholder="搜索"> <span
                            class="glyphicon glyphicon-search form-control-feedback"></span>
                    </div>
                </div>
                <!--工具栏/-->
                <!--数据列表-->
                <table id="dataList"
                       class="table table-bordered table-striped table-hover dataTable">
                    <thead>
                    <tr>
                        <th class="" style="padding-right: 0px"><input id="selall" type="checkbox"
                                                                       class="icheckbox_square-blue"></th>
                        <th class="sorting_asc">ID</th>
                        <th class="sorting">产品编号</th>
                        <th class="sorting">产品名称</th>
                        <th class="sorting">出发城市</th>
                        <th class="sorting">出发时间</th>
                        <th class="sorting">产品价格</th>
                        <th class="sorting">产品状态</th>
                        <th class="text-center">操作</th>
                    </tr>
                    </thead>
                    <tbody id="insertData">
                    <!--<tr>-->
                        <!--<td><input name="ids" type="checkbox"></td>-->
                        <!--<td>1</td>-->
                        <!--<td>itcast-001</td>-->
                        <!--<td>广州五日游</td>-->
                        <!--<td>￥广州</td>-->
                        <!--<td>2018-03-30 19:00:00</td>-->
                        <!--<td>850.0</td>-->
                        <!--<td>关闭</td>-->
                        <!--<td class="text-center">-->
                            <!--<button type="button" class="btn bg-olive btn-xs productDetail">详情</button>-->
                            <!--<button type="button" class="btn bg-olive btn-xs productModify">编辑</button>-->
                        <!--</td>-->
                    <!--</tr>-->
                    <!--<tr>-->
                        <!--<td><input name="ids" type="checkbox"></td>-->
                        <!--<td>2</td>-->
                        <!--<td>itcast-002</td>-->
                        <!--<td>北京三日游</td>-->
                        <!--<td>￥北京</td>-->
                        <!--<td>2018-03-28 00:00:00</td>-->
                        <!--<td>350.0</td>-->
                        <!--<td>开启</td>-->
                        <!--<td class="text-center">-->
                            <!--<button type="button" class="btn bg-olive btn-xs productDetail">详情</button>-->
                            <!--<button type="button" class="btn bg-olive btn-xs productModify">编辑</button>-->
                        <!--</td>-->
                    <!--</tr>-->
                    </tbody>
                </table>
                <!--数据列表/-->

            </div>
            <!-- 数据表格 /-->
        </div>
        <!-- /.box-body -->
        <!-- .box-footer-->
        <div class="box-footer">
            <div class="pull-left">
                <div class="form-group form-inline">
                    总共2 页，共14 条数据。 每页 <select class="form-control">
                    <option>10</option>
                    <option>15</option>
                    <option>20</option>
                    <option>50</option>
                    <option>80</option>
                </select> 条
                </div>
            </div>
            <div class="box-tools pull-right">
                <ul class="pagination">
                    <li><a href="#" aria-label="Previous">首页</a></li>
                    <li><a href="#">上一页</a></li>
                    <li><a href="#">1</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">5</a></li>
                    <li><a href="#">下一页</a></li>
                    <li><a href="#" aria-label="Next">尾页</a></li>
                </ul>
            </div>
        </div>
        <!-- /.box-footer-->
    </div>
</section>
<!-- 正文区域 /-->

<script>

    // 初始化组件功能
    $(function () {
        init();
    });

    // 初始化获取数据
    $(function () {
        // 发送ajax请求获取数据,渲染页面
        $.get("product/findAll?page=1", function (data) {
            var insertData = '';
            for (var i = 0; i < data.length; i ++) {
                insertData += '<tr>' +
                    '<td><div class="icheckbox_square-blue"><input name="ids" type="checkbox" class="myCheckbox"></div></td>' +
                    '<td>' + data[i].id + '</td>' +
                    '<td>' + data[i].productNum + '</td>' +
                    '<td>' + data[i].productName + '</td>' +
                    '<td>' + data[i].cityName + '</td>' +
                    '<td>' + data[i].departureTimeStr + '</td>' +
                    '<td>' + data[i].productPrice + '</td>' +
                    '<td>' + data[i].productStatusStr + '</td>' +
                    '<td class="text-center">' +
                    '<button type="button" class="btn bg-olive btn-xs productDetail">详情</button>' +
                    '<button type="button" class="btn bg-olive btn-xs productModify">编辑</button>' +
                    '</td></tr>';
            }
            $("#insertData").html(insertData);
            // 绑定事件
            active();
        })
    });

    // 加载完页面后再绑定事件
    function active() {
        // 1. 产品详情
        $(".productDetail").click(function () {
            $.get("pages/component/productsManage/productDetail.html?id=1", function (data) {
                $("#content-ajax-insert").html(data);
                init();
            })
        });

        // 2. 产品添加
        $("#productAdd").click(function () {
            $.get("pages/component/productsManage/productAdd.html?id=1", function (data) {
                $("#content-ajax-insert").html(data);
                init();
            })
        });

        // 3. 产品编辑
        $(".productModify").click(function () {
            $.get("pages/component/productsManage/productModify.html?id=1", function (data) {
                $("#content-ajax-insert").html(data);
                init();
            })
        });
    };

</script>
<style>
    .myCheckbox {
        margin-top: 0 !important;
        height: 24px;
        width: 24px;
    }
</style>